<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Activity Diagram</title>
  </head>
  <body>
    <svg viewBox="0 0 900 1200" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <!-- Gradients for modern look -->
        <radialGradient id="startGrad" cx="50%" cy="50%" r="50%">
          <stop offset="0%" style="stop-color: #2ecc71; stop-opacity: 1" />
          <stop offset="100%" style="stop-color: #27ae60; stop-opacity: 1" />
        </radialGradient>
        <radialGradient id="endGrad" cx="50%" cy="50%" r="50%">
          <stop offset="0%" style="stop-color: #e74c3c; stop-opacity: 1" />
          <stop offset="100%" style="stop-color: #c0392b; stop-opacity: 1" />
        </radialGradient>
        <linearGradient id="processGrad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color: #3498db; stop-opacity: 1" />
          <stop offset="100%" style="stop-color: #2980b9; stop-opacity: 1" />
        </linearGradient>
        <linearGradient id="decisionGrad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color: #f39c12; stop-opacity: 1" />
          <stop offset="100%" style="stop-color: #e67e22; stop-opacity: 1" />
        </linearGradient>
        <linearGradient id="actionGrad" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color: #9b59b6; stop-opacity: 1" />
          <stop offset="100%" style="stop-color: #8e44ad; stop-opacity: 1" />
        </linearGradient>

        <!-- Drop shadow filter -->
        <filter id="dropshadow" x="-20%" y="-20%" width="140%" height="140%">
          <feDropShadow dx="2" dy="2" stdDeviation="2" flood-opacity="0.3" />
        </filter>

        <!-- Arrow markers -->
        <marker
          id="arrowhead"
          markerWidth="10"
          markerHeight="7"
          refX="9"
          refY="3.5"
          orient="auto"
        >
          <polygon points="0 0, 10 3.5, 0 7" fill="#34495e" />
        </marker>

        <!-- Glow effect -->
        <filter id="glow">
          <feGaussianBlur stdDeviation="2" result="coloredBlur" />
          <feMerge>
            <feMergeNode in="coloredBlur" />
            <feMergeNode in="SourceGraphic" />
          </feMerge>
        </filter>
      </defs>

      <!-- Background -->
      <rect width="900" height="1200" fill="#f8fafc" />

      <!-- Title -->
      <text
        x="450"
        y="40"
        text-anchor="middle"
        font-family="Arial, sans-serif"
        font-size="28"
        font-weight="bold"
        fill="#2c3e50"
      >
        Smart Dog Cage - Activity Diagram
      </text>

      <!-- Start Node -->
      <circle
        cx="450"
        cy="90"
        r="20"
        fill="url(#startGrad)"
        filter="url(#dropshadow)"
      />
      <text
        x="450"
        y="96"
        text-anchor="middle"
        font-family="Arial, sans-serif"
        font-size="12"
        font-weight="bold"
        fill="white"
      >
        START
      </text>

      <!-- Arrow from Start -->
      <line
        x1="450"
        y1="110"
        x2="450"
        y2="140"
        stroke="#34495e"
        stroke-width="3"
        marker-end="url(#arrowhead)"
      >
        <animate
          attributeName="opacity"
          values="0.5;1;0.5"
          dur="2s"
          repeatCount="indefinite"
        />
      </line>

      <!-- User opens Mobile App -->
      <g transform="translate(300, 150)">
        <rect
          x="0"
          y="0"
          width="300"
          height="60"
          rx="30"
          fill="url(#processGrad)"
          filter="url(#dropshadow)"
        />
        <text
          x="150"
          y="25"
          text-anchor="middle"
          font-family="Arial, sans-serif"
          font-size="14"
          font-weight="bold"
          fill="white"
        >
          User Opens Mobile App
        </text>
        <text
          x="150"
          y="45"
          text-anchor="middle"
          font-family="Arial, sans-serif"
          font-size="12"
          fill="rgba(255,255,255,0.9)"
        >
          📱 Initialize Application
        </text>
      </g>

      <!-- Arrow to Decision -->
      <line
        x1="450"
        y1="210"
        x2="450"
        y2="250"
        stroke="#34495e"
        stroke-width="3"
        marker-end="url(#arrowhead)"
      >
        <animate
          attributeName="opacity"
          values="0.5;1;0.5"
          dur="2s"
          repeatCount="indefinite"
        />
      </line>

      <!-- Decision Diamond: Selects Action -->
      <g transform="translate(450, 270)">
        <polygon
          points="0,-40 60,0 0,40 -60,0"
          fill="url(#decisionGrad)"
          filter="url(#dropshadow)"
        />
        <text
          x="0"
          y="-10"
          text-anchor="middle"
          font-family="Arial, sans-serif"
          font-size="12"
          font-weight="bold"
          fill="white"
        >
          Select
        </text>
        <text
          x="0"
          y="5"
          text-anchor="middle"
          font-family="Arial, sans-serif"
          font-size="12"
          font-weight="bold"
          fill="white"
        >
          Action
        </text>
        <text
          x="0"
          y="20"
          text-anchor="middle"
          font-family="Arial, sans-serif"
          font-size="10"
          fill="rgba(255,255,255,0.9)"
        >
          🤔
        </text>
      </g>

      <!-- Branch 1: Lock Cage -->
      <g>
        <!-- Arrow to Lock Cage -->
        <line
          x1="390"
          y1="270"
          x2="200"
          y2="270"
          stroke="#34495e"
          stroke-width="2"
        />
        <line
          x1="200"
          y1="270"
          x2="200"
          y2="350"
          stroke="#34495e"
          stroke-width="2"
          marker-end="url(#arrowhead)"
        />
        <text
          x="295"
          y="265"
          text-anchor="middle"
          font-family="Arial, sans-serif"
          font-size="11"
          font-weight="bold"
          fill="#34495e"
        >
          Lock Cage
        </text>

        <!-- Lock Cage Process -->
        <g transform="translate(50, 360)">
          <rect
            x="0"
            y="0"
            width="300"
            height="50"
            rx="25"
            fill="url(#actionGrad)"
            filter="url(#dropshadow)"
          />
          <text
            x="150"
            y="20"
            text-anchor="middle"
            font-family="Arial, sans-serif"
            font-size="13"
            font-weight="bold"
            fill="white"
          >
            🔒 Lock Cage Command
          </text>
          <text
            x="150"
            y="35"
            text-anchor="middle"
            font-family="Arial, sans-serif"
            font-size="11"
            fill="rgba(255,255,255,0.9)"
          >
            Send → IoT → Lock Motor
          </text>
        </g>

        <!-- Arrow from Lock to Merge -->
        <line
          x1="200"
          y1="410"
          x2="200"
          y2="500"
          stroke="#34495e"
          stroke-width="2"
        />
        <line
          x1="200"
          y1="500"
          x2="450"
          y2="500"
          stroke="#34495e"
          stroke-width="2"
          marker-end="url(#arrowhead)"
        />
      </g>

      <!-- Branch 2: Unlock Cage -->
      <g>
        <!-- Arrow to Unlock Cage -->
        <line
          x1="450"
          y1="310"
          x2="450"
          y2="350"
          stroke="#34495e"
          stroke-width="2"
          marker-end="url(#arrowhead)"
        />
        <text
          x="465"
          y="330"
          font-family="Arial, sans-serif"
          font-size="11"
          font-weight="bold"
          fill="#34495e"
        >
          Unlock Cage
        </text>

        <!-- Unlock Cage Process -->
        <g transform="translate(300, 360)">
          <rect
            x="0"
            y="0"
            width="300"
            height="50"
            rx="25"
            fill="url(#actionGrad)"
            filter="url(#dropshadow)"
          />
          <text
            x="150"
            y="20"
            text-anchor="middle"
            font-family="Arial, sans-serif"
            font-size="13"
            font-weight="bold"
            fill="white"
          >
            🔓 Unlock Cage Command
          </text>
          <text
            x="150"
            y="35"
            text-anchor="middle"
            font-family="Arial, sans-serif"
            font-size="11"
            fill="rgba(255,255,255,0.9)"
          >
            Send → IoT → Unlock Motor
          </text>
        </g>

        <!-- Arrow from Unlock to Merge -->
        <line
          x1="450"
          y1="410"
          x2="450"
          y2="500"
          stroke="#34495e"
          stroke-width="2"
          marker-end="url(#arrowhead)"
        />
      </g>

      <!-- Branch 3: Voice Command -->
      <g>
        <!-- Arrow to Voice Command -->
        <line
          x1="510"
          y1="270"
          x2="700"
          y2="270"
          stroke="#34495e"
          stroke-width="2"
        />
        <line
          x1="700"
          y1="270"
          x2="700"
          y2="320"
          stroke="#34495e"
          stroke-width="2"
          marker-end="url(#arrowhead)"
        />
        <text
          x="605"
          y="265"
          text-anchor="middle"
          font-family="Arial, sans-serif"
          font-size="11"
          font-weight="bold"
          fill="#34495e"
        >
          Voice Command
        </text>

        <!-- Sub-decision: Choose Voice Command -->
        <g transform="translate(700, 340)">
          <polygon
            points="0,-30 45,0 0,30 -45,0"
            fill="url(#decisionGrad)"
            filter="url(#dropshadow)"
          />
          <text
            x="0"
            y="-5"
            text-anchor="middle"
            font-family="Arial, sans-serif"
            font-size="10"
            font-weight="bold"
            fill="white"
          >
            Choose
          </text>
          <text
            x="0"
            y="8"
            text-anchor="middle"
            font-family="Arial, sans-serif"
            font-size="10"
            font-weight="bold"
            fill="white"
          >
            Command
          </text>
        </g>

        <!-- Voice Command Process -->
        <g transform="translate(550, 420)">
          <rect
            x="0"
            y="0"
            width="300"
            height="50"
            rx="25"
            fill="url(#actionGrad)"
            filter="url(#dropshadow)"
          />
          <text
            x="150"
            y="20"
            text-anchor="middle"
            font-family="Arial, sans-serif"
            font-size="13"
            font-weight="bold"
            fill="white"
          >
            🔊 Send Voice Command
          </text>
          <text
            x="150"
            y="35"
            text-anchor="middle"
            font-family="Arial, sans-serif"
            font-size="11"
            fill="rgba(255,255,255,0.9)"
          >
            Choose → Send to IoT → Play Audio
          </text>
        </g>

        <!-- Arrow from Voice sub-decision to Voice process -->
        <line
          x1="700"
          y1="370"
          x2="700"
          y2="420"
          stroke="#34495e"
          stroke-width="2"
          marker-end="url(#arrowhead)"
        />

        <!-- Arrow from Voice to Merge -->
        <line
          x1="700"
          y1="470"
          x2="700"
          y2="500"
          stroke="#34495e"
          stroke-width="2"
        />
        <line
          x1="700"
          y1="500"
          x2="450"
          y2="500"
          stroke="#34495e"
          stroke-width="2"
        />
      </g>

      <!-- Merge Point (invisible) -->
      <circle cx="450" cy="500" r="4" fill="#34495e" />

      <!-- Arrow to Response -->
      <line
        x1="450"
        y1="504"
        x2="450"
        y2="540"
        stroke="#34495e"
        stroke-width="3"
        marker-end="url(#arrowhead)"
      >
        <animate
          attributeName="opacity"
          values="0.5;1;0.5"
          dur="1.8s"
          repeatCount="indefinite"
        />
      </line>

      <!-- Response Process -->
      <g transform="translate(250, 550)">
        <rect
          x="0"
          y="0"
          width="400"
          height="70"
          rx="35"
          fill="url(#processGrad)"
          filter="url(#dropshadow)"
        />
        <text
          x="200"
          y="25"
          text-anchor="middle"
          font-family="Arial, sans-serif"
          font-size="14"
          font-weight="bold"
          fill="white"
        >
          Receive Success/Failure Response
        </text>
        <text
          x="200"
          y="45"
          text-anchor="middle"
          font-family="Arial, sans-serif"
          font-size="12"
          fill="rgba(255,255,255,0.9)"
        >
          📡 IoT Controller Feedback
        </text>
        <text
          x="200"
          y="60"
          text-anchor="middle"
          font-family="Arial, sans-serif"
          font-size="11"
          fill="rgba(255,255,255,0.8)"
        >
          ✅ Success | ❌ Failure | ⏳ Timeout
        </text>
      </g>

      <!-- Arrow to End -->
      <line
        x1="450"
        y1="620"
        x2="450"
        y2="670"
        stroke="#34495e"
        stroke-width="3"
        marker-end="url(#arrowhead)"
      >
        <animate
          attributeName="opacity"
          values="0.5;1;0.5"
          dur="2s"
          repeatCount="indefinite"
        />
      </line>

      <!-- End Node -->
      <circle
        cx="450"
        cy="690"
        r="20"
        fill="url(#endGrad)"
        filter="url(#dropshadow)"
      />
      <circle cx="450" cy="690" r="12" fill="white" />
      <text
        x="450"
        y="720"
        text-anchor="middle"
        font-family="Arial, sans-serif"
        font-size="12"
        font-weight="bold"
        fill="#2c3e50"
      >
        END
      </text>

      <!-- Activity Flow Legend -->
      <g transform="translate(50, 780)">
        <rect
          x="0"
          y="0"
          width="800"
          height="200"
          rx="15"
          fill="rgba(255,255,255,0.95)"
          stroke="#bdc3c7"
          stroke-width="2"
          filter="url(#dropshadow)"
        />
        <text
          x="400"
          y="30"
          text-anchor="middle"
          font-family="Arial, sans-serif"
          font-size="18"
          font-weight="bold"
          fill="#2c3e50"
        >
          Activity Flow Details
        </text>

        <!-- Flow descriptions -->
        <g transform="translate(50, 50)">
          <text
            x="0"
            y="0"
            font-family="Arial, sans-serif"
            font-size="14"
            font-weight="bold"
            fill="#2c3e50"
          >
            🔒 Lock Cage Flow:
          </text>
          <text
            x="20"
            y="20"
            font-family="Arial, sans-serif"
            font-size="12"
            fill="#34495e"
          >
            1. User selects "Lock Cage" → 2. App sends HTTP/MQTT command → 3.
            IoT processes → 4. GPIO signal activates motor → 5. Confirmation
            returned
          </text>

          <text
            x="0"
            y="50"
            font-family="Arial, sans-serif"
            font-size="14"
            font-weight="bold"
            fill="#2c3e50"
          >
            🔓 Unlock Cage Flow:
          </text>
          <text
            x="20"
            y="70"
            font-family="Arial, sans-serif"
            font-size="12"
            fill="#34495e"
          >
            1. User selects "Unlock Cage" → 2. App sends HTTP/MQTT command → 3.
            IoT processes → 4. GPIO signal deactivates motor → 5. Confirmation
            returned
          </text>

          <text
            x="0"
            y="100"
            font-family="Arial, sans-serif"
            font-size="14"
            font-weight="bold"
            fill="#2c3e50"
          >
            🔊 Voice Command Flow:
          </text>
          <text
            x="20"
            y="120"
            font-family="Arial, sans-serif"
            font-size="12"
            fill="#34495e"
          >
            1. User selects voice option → 2. Choose from predefined commands →
            3. Audio data sent to IoT → 4. Speaker plays message → 5. Playback
            confirmation
          </text>

          <text
            x="0"
            y="150"
            font-family="Arial, sans-serif"
            font-size="14"
            font-weight="bold"
            fill="#2c3e50"
          >
            📡 Response Handling:
          </text>
          <text
            x="20"
            y="170"
            font-family="Arial, sans-serif"
            font-size="12"
            fill="#34495e"
          >
            All actions return status: Success (✅), Failure (❌), or Timeout
            (⏳) with appropriate user notification
          </text>
        </g>
      </g>

      <!-- Process Symbols Legend -->
      <g transform="translate(50, 1000)">
        <rect
          x="0"
          y="0"
          width="800"
          height="120"
          rx="15"
          fill="rgba(236, 240, 241, 0.95)"
          stroke="#95a5a6"
          stroke-width="1"
          filter="url(#dropshadow)"
        />
        <text
          x="400"
          y="25"
          text-anchor="middle"
          font-family="Arial, sans-serif"
          font-size="16"
          font-weight="bold"
          fill="#2c3e50"
        >
          UML Activity Diagram Symbols
        </text>

        <!-- Symbol explanations -->
        <g transform="translate(50, 40)">
          <circle cx="15" cy="15" r="12" fill="url(#startGrad)" />
          <text
            x="40"
            y="20"
            font-family="Arial, sans-serif"
            font-size="12"
            fill="#2c3e50"
          >
            Start/End Nodes - Begin/Terminate process flow
          </text>

          <rect
            x="250"
            y="3"
            width="100"
            height="24"
            rx="12"
            fill="url(#processGrad)"
          />
          <text
            x="365"
            y="20"
            font-family="Arial, sans-serif"
            font-size="12"
            fill="#2c3e50"
          >
            Activity/Process - Action or operation
          </text>

          <polygon
            points="520,15 545,0 570,15 545,30 520,15"
            fill="url(#decisionGrad)"
          />
          <text
            x="585"
            y="20"
            font-family="Arial, sans-serif"
            font-size="12"
            fill="#2c3e50"
          >
            Decision Point - Conditional branching
          </text>

          <g transform="translate(0, 40)">
            <line
              x1="15"
              y1="0"
              x2="50"
              y2="0"
              stroke="#34495e"
              stroke-width="2"
              marker-end="url(#arrowhead)"
            />
            <text
              x="60"
              y="5"
              font-family="Arial, sans-serif"
              font-size="12"
              fill="#2c3e50"
            >
              Control Flow - Direction of process execution
            </text>

            <circle cx="300" cy="0" r="3" fill="#34495e" />
            <text
              x="315"
              y="5"
              font-family="Arial, sans-serif"
              font-size="12"
              fill="#2c3e50"
            >
              Merge Point - Multiple flows converging
            </text>
          </g>
        </g>
      </g>
    </svg>
  </body>
</html>
